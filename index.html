<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistente Virtual Docente - Planifica+ con IA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #4cc9f0;
            --success-color: #2ecc71;
            --warning-color: #f9c74f;
            --danger-color: #e63946;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --text-color: #333;
            --text-light: #6c757d;
            --border-color: #dee2e6;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --radius: 12px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            font-size: 1.8rem;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .container {
            display: flex;
            flex: 1;
            overflow: hidden;
            padding: 1rem;
            gap: 1rem;
        }
        
        .sidebar {
            width: 320px;
            background-color: white;
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .modules {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .section-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .module-btn {
            padding: 14px 16px;
            background-color: var(--light-color);
            border: none;
            border-radius: 10px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
            width: 100%;
        }
        
        .module-btn:hover {
            background-color: #e9ecef;
            transform: translateY(-2px);
        }
        
        .module-btn.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: var(--shadow);
        }
        
        .module-icon {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }
        
        .templates-section {
            margin-top: 10px;
        }
        
        .template-card {
            background-color: var(--light-color);
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid var(--primary-color);
        }
        
        .template-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }
        
        .template-title {
            font-weight: 600;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--secondary-color);
        }
        
        .template-desc {
            font-size: 0.85rem;
            color: var(--text-light);
            line-height: 1.4;
        }
        
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .chat-header {
            padding: 1.2rem 1.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .module-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .module-info i {
            font-size: 1.2rem;
        }
        
        .chat-actions {
            display: flex;
            gap: 10px;
        }
        
        .chat-action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .chat-action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        
        .chat-messages {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background-color: #f8f9fa;
        }
        
        .message {
            max-width: 80%;
            padding: 14px 18px;
            border-radius: 18px;
            line-height: 1.5;
            position: relative;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            align-self: flex-end;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-bottom-right-radius: 5px;
        }
        
        .bot-message {
            align-self: flex-start;
            background-color: white;
            border: 1px solid var(--border-color);
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .message-time {
            font-size: 0.7rem;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }
        
        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .quick-action-btn {
            padding: 8px 14px;
            background-color: white;
            border: 1px solid var(--primary-color);
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--primary-color);
        }
        
        .quick-action-btn:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        .suggestion-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        .suggestion-chip {
            padding: 6px 12px;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 16px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .suggestion-chip:hover {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .chat-input-container {
            display: flex;
            padding: 1.2rem;
            border-top: 1px solid var(--border-color);
            gap: 12px;
            background-color: white;
        }
        
        .chat-input {
            flex: 1;
            padding: 14px 18px;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            outline: none;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .chat-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        .send-btn {
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }
        
        .send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
        }
        
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .login-form {
            background-color: white;
            padding: 2.5rem;
            border-radius: var(--radius);
            width: 420px;
            box-shadow: var(--shadow);
            text-align: center;
        }
        
        .login-form h2 {
            margin-bottom: 1.5rem;
            color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 1.2rem;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        .login-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
        }
        
        .demo-credentials {
            margin-top: 1.5rem;
            padding: 12px;
            background-color: #e7f5ff;
            border-radius: 8px;
            font-size: 0.85rem;
            color: var(--text-light);
        }
        
        .hidden {
            display: none;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-light);
            font-style: italic;
            padding: 10px 0;
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--text-light);
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typingAnimation {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        .welcome-card {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow);
        }
        
        .welcome-card h3 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .welcome-card p {
            font-size: 0.9rem;
            opacity: 0.9;
            line-height: 1.5;
        }
        
        .resources-section {
            margin-top: 1rem;
        }
        
        .resource-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9rem;
        }
        
        .resource-item:last-child {
            border-bottom: none;
        }
        
        .resource-icon {
            color: var(--primary-color);
            font-size: 1rem;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                padding: 0.5rem;
            }
            
            .sidebar {
                width: 100%;
                max-height: 200px;
            }
            
            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-robot"></i>
            </div>
            <h1>Planifica+ con IA</h1>
        </div>
        <div class="user-info">
            <div class="user-avatar" id="user-avatar">D</div>
            <span id="user-name">Docente</span>
            <button id="logout-btn" class="chat-action-btn">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </header>
    
    <div class="container">
        <div class="sidebar">
            <div class="welcome-card">
                <h3><i class="fas fa-graduation-cap"></i> Asistente Docente</h3>
                <p>Te ayudo a optimizar tu tiempo en planificaci贸n curricular, creaci贸n de s铆labos y materiales educativos.</p>
            </div>
            
            <div class="modules">
                <div class="section-title">
                    <i class="fas fa-th-large"></i> M贸dulos
                </div>
                <button class="module-btn active" data-module="planificacion">
                    <div class="module-icon"><i class="fas fa-calendar-alt"></i></div>
                    <div>
                        <div>Planificaci贸n Curricular</div>
                        <div class="template-desc">Dise帽a sesiones y unidades de aprendizaje</div>
                    </div>
                </button>
                <button class="module-btn" data-module="silabos">
                    <div class="module-icon"><i class="fas fa-book"></i></div>
                    <div>
                        <div>Elaboraci贸n de S铆labos</div>
                        <div class="template-desc">Crea s铆labos acad茅micos con estructura oficial</div>
                    </div>
                </button>
                <button class="module-btn" data-module="contenidos">
                    <div class="module-icon"><i class="fas fa-palette"></i></div>
                    <div>
                        <div>Contenidos Visuales</div>
                        <div class="template-desc">Genera materiales visuales atractivos</div>
                    </div>
                </button>
                <button class="module-btn" data-module="evaluacion">
                    <div class="module-icon"><i class="fas fa-clipboard-check"></i></div>
                    <div>
                        <div>Evaluaci贸n de Competencias</div>
                        <div class="template-desc">Crea instrumentos de evaluaci贸n</div>
                    </div>
                </button>
                <button class="module-btn" data-module="comunicacion">
                    <div class="module-icon"><i class="fas fa-envelope"></i></div>
                    <div>
                        <div>Comunicaci贸n Institucional</div>
                        <div class="template-desc">Redacta correos y comunicados</div>
                    </div>
                </button>
            </div>
            
            <div class="templates-section">
                <div class="section-title">
                    <i class="fas fa-file-alt"></i> Plantillas
                </div>
                
                <div class="template-card" data-template="sesion-clase">
                    <div class="template-title"><i class="fas fa-file-contract"></i> Sesi贸n de Clase</div>
                    <div class="template-desc">Estructura b谩sica para una sesi贸n de aprendizaje con objetivos y actividades</div>
                </div>
                
                <div class="template-card" data-template="unidad-aprendizaje">
                    <div class="template-title"><i class="fas fa-project-diagram"></i> Unidad de Aprendizaje</div>
                    <div class="template-desc">Planificaci贸n completa de una unidad did谩ctica con competencias y evaluaciones</div>
                </div>
                
                <div class="template-card" data-template="rubrica-evaluacion">
                    <div class="template-title"><i class="fas fa-table"></i> R煤brica de Evaluaci贸n</div>
                    <div class="template-desc">Instrumento para evaluar competencias con criterios y niveles de desempe帽o</div>
                </div>
            </div>
            
            <div class="resources-section">
                <div class="section-title">
                    <i class="fas fa-link"></i> Recursos
                </div>
                
                <div class="resource-item">
                    <div class="resource-icon"><i class="fas fa-video"></i></div>
                    <div>Tutoriales de uso</div>
                </div>
                <div class="resource-item">
                    <div class="resource-icon"><i class="fas fa-download"></i></div>
                    <div>Descargar plantillas</div>
                </div>
                <div class="resource-item">
                    <div class="resource-icon"><i class="fas fa-question-circle"></i></div>
                    <div>Centro de ayuda</div>
                </div>
            </div>
        </div>
        
        <div class="chat-container">
            <div class="chat-header">
                <div class="module-info">
                    <i class="fas fa-calendar-alt"></i>
                    <h2 id="current-module">Planificaci贸n Curricular</h2>
                </div>
                <div class="chat-actions">
                    <button class="chat-action-btn" id="clear-chat-btn" title="Limpiar conversaci贸n">
                        <i class="fas fa-broom"></i>
                    </button>
                    <button class="chat-action-btn" id="help-btn" title="Ayuda">
                        <i class="fas fa-question"></i>
                    </button>
                </div>
            </div>
            
            <div class="chat-messages" id="chat-messages">
                <div class="message bot-message">
                    <div>隆Hola! Soy tu asistente virtual para la planificaci贸n docente. Estoy aqu铆 para ayudarte a optimizar tu tiempo y mejorar la eficiencia en tus procesos de planificaci贸n curricular.</div>
                    <div class="quick-actions">
                        <button class="quick-action-btn" data-action="planificar-sesion">Planificar una sesi贸n</button>
                        <button class="quick-action-btn" data-action="crear-silabo">Crear un s铆labo</button>
                        <button class="quick-action-btn" data-action="generar-material">Generar material visual</button>
                        <button class="quick-action-btn" data-action="evaluar-competencias">Evaluar competencias</button>
                    </div>
                    <div class="message-time" id="current-time"></div>
                </div>
            </div>
            
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="user-input" placeholder="Escribe tu mensaje aqu铆...">
                <button class="send-btn" id="send-btn">
                    <i class="fas fa-paper-plane"></i> Enviar
                </button>
            </div>
        </div>
    </div>
    
    <div class="login-modal hidden" id="login-modal">
        <div class="login-form">
            <h2><i class="fas fa-user-graduate"></i> Iniciar Sesi贸n</h2>
            <div class="form-group">
                <label for="username">Usuario</label>
                <input type="text" id="username" placeholder="Ingresa tu usuario">
            </div>
            <div class="form-group">
                <label for="password">Contrase帽a</label>
                <input type="password" id="password" placeholder="Ingresa tu contrase帽a">
            </div>
            <button class="login-btn" id="login-btn">Iniciar Sesi贸n</button>
            
            <div class="demo-credentials">
                <p><strong>Para probar el sistema:</strong><br>
                Usuario: <em>cualquier texto</em><br>
                Contrase帽a: <em>cualquier texto</em></p>
            </div>
        </div>
    </div>

    <script>
        // Elementos del DOM
        const loginModal = document.getElementById('login-modal');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginBtn = document.getElementById('login-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const userAvatar = document.getElementById('user-avatar');
        const userNameSpan = document.getElementById('user-name');
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const moduleBtns = document.querySelectorAll('.module-btn');
        const currentModule = document.getElementById('current-module');
        const templateCards = document.querySelectorAll('.template-card');
        const clearChatBtn = document.getElementById('clear-chat-btn');
        const helpBtn = document.getElementById('help-btn');
        const currentTimeElement = document.getElementById('current-time');
        
        // Estado de la aplicaci贸n
        let currentUser = null;
        let activeModule = 'planificacion';
        let isWaitingForResponse = false;
        
        // Actualizar hora actual
        function updateCurrentTime() {
            const now = new Date();
            currentTimeElement.textContent = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
        }
        
        // Base de conocimiento del chatbot - CORREGIDA
        const knowledgeBase = {
            planificacion: {
                name: "Planificaci贸n Curricular",
                icon: "fas fa-calendar-alt",
                description: "Te ayudo a planificar sesiones de clase, unidades de aprendizaje y secuencias did谩cticas",
                responses: {
                    greeting: "Puedo ayudarte a crear una planificaci贸n curricular completa. 驴Qu茅 necesitas? 驴Una sesi贸n de clase, una unidad de aprendizaje o una secuencia did谩ctica completa?",
                    default: "Para la planificaci贸n curricular, necesito que me proporciones informaci贸n sobre: nivel educativo, 谩rea o asignatura, competencias a desarrollar, duraci贸n y metodolog铆a preferida.",
                    "sesi贸n": "Para crear una sesi贸n de clase, necesito: tema, nivel educativo, duraci贸n, competencias, objetivos de aprendizaje y actividades principales.",
                    "unidad": "Para planificar una unidad de aprendizaje, necesito: nombre de la unidad, duraci贸n en semanas, competencias principales, productos esperados y criterios de evaluaci贸n.",
                    "secuencia": "Para dise帽ar una secuencia did谩ctica, necesito: temas a cubrir, nivel de complejidad, metodolog铆a preferida y recursos disponibles."
                },
                suggestions: ["Dise帽ar una sesi贸n de clase", "Planificar una unidad", "Crear secuencia did谩ctica"]
            },
            silabos: {
                name: "Elaboraci贸n de S铆labos",
                icon: "fas fa-book",
                description: "Te ayudo a crear s铆labos acad茅micos con estructura oficial",
                responses: {
                    greeting: "Puedo asistirte en la creaci贸n de s铆labos acad茅micos. Necesito informaci贸n sobre: nombre del curso, cr茅ditos, competencias, contenidos, metodolog铆a y sistema de evaluaci贸n.",
                    default: "Para elaborar un s铆labo, necesito que me proporciones: nombre del curso, cr茅ditos, competencias a desarrollar, contenidos principales, metodolog铆a de ense帽anza y sistema de evaluaci贸n.",
                    "estructura": "La estructura b谩sica de un s铆labo incluye: datos generales, competencias, contenidos, metodolog铆a, evaluaci贸n, bibliograf铆a y cronograma.",
                    "competencias": "Para definir las competencias del curso, considera: competencias generales, espec铆ficas y transversales que los estudiantes deben desarrollar.",
                    "evaluaci贸n": "El sistema de evaluaci贸n debe incluir: criterios, instrumentos, porcentajes y fechas de evaluaci贸n.",
                    "elaboraci贸n": "Para elaborar un s铆labo, comienza con los datos generales del curso, luego define las competencias, organiza los contenidos por unidades, establece la metodolog铆a y finalmente dise帽a el sistema de evaluaci贸n.",
                    "experiencia": "La experiencia curricular se refiere a c贸mo los estudiantes vivir谩n el proceso de aprendizaje. Debe considerar actividades te贸ricas, pr谩cticas y de evaluaci贸n que permitan desarrollar las competencias establecidas."
                },
                suggestions: ["Estructura de s铆labo", "Definir competencias", "Sistema de evaluaci贸n"]
            },
            contenidos: {
                name: "Contenidos Visuales",
                icon: "fas fa-palette",
                description: "Te ayudo a crear materiales visuales atractivos para tus clases",
                responses: {
                    greeting: "Puedo ayudarte a crear presentaciones, infograf铆as y materiales visuales para tus clases. 驴Qu茅 tipo de material necesitas?",
                    default: "Para generar contenido visual, necesito que me proporciones: tema, nivel educativo, tipo de material (presentaci贸n, infograf铆a, etc.), elementos clave a incluir y estilo preferido.",
                    "presentaci贸n": "Para crear una presentaci贸n, necesito: tema, cantidad de diapositivas, elementos visuales preferidos, y puntos clave a destacar.",
                    "infograf铆a": "Para dise帽ar una infograf铆a, necesito: datos principales, estructura de la informaci贸n, estilo visual y elementos gr谩ficos preferidos.",
                    "material": "Para desarrollar material did谩ctico, necesito: tipo de material, destinatarios, objetivos educativos y formato preferido."
                },
                suggestions: ["Crear presentaci贸n", "Dise帽ar infograf铆a", "Material did谩ctico"]
            },
            evaluacion: {
                name: "Evaluaci贸n de Competencias",
                icon: "fas fa-clipboard-check",
                description: "Te ayudo a crear instrumentos de evaluaci贸n y r煤bricas",
                responses: {
                    greeting: "Puedo asistirte en la creaci贸n de instrumentos de evaluaci贸n. 驴Necesitas una r煤brica, lista de cotejo, prueba escrita o alg煤n otro tipo de evaluaci贸n?",
                    default: "Para crear instrumentos de evaluaci贸n, necesito que me proporciones: competencia a evaluar, criterios de evaluaci贸n, niveles de desempe帽o y tipo de instrumento (r煤brica, lista de cotejo, etc.).",
                    "r煤brica": "Para crear una r煤brica, necesito: competencia a evaluar, criterios de evaluaci贸n, niveles de desempe帽o (ej: excelente, bueno, regular, deficiente) y descriptores para cada nivel.",
                    "lista cotejo": "Para una lista de cotejo, necesito: competencia, indicadores de logro y formato de verificaci贸n (s铆/no, cumplido/pendiente).",
                    "prueba": "Para dise帽ar una prueba escrita, necesito: objetivos de evaluaci贸n, tipo de preguntas (selecci贸n m煤ltiple, desarrollo, etc.), y contenido a evaluar."
                },
                suggestions: ["Crear r煤brica", "Lista de cotejo", "Dise帽ar prueba"]
            },
            comunicacion: {
                name: "Comunicaci贸n Institucional",
                icon: "fas fa-envelope",
                description: "Te ayudo a redactar correos y comunicados institucionales",
                responses: {
                    greeting: "Puedo ayudarte a redactar correos y comunicados. 驴Qu茅 tipo de comunicaci贸n necesitas?",
                    default: "Para redactar un correo o comunicado, necesito que me proporciones: destinatario, prop贸sito del mensaje, tono (formal, informal) y puntos clave a incluir.",
                    "correo": "Para redactar un correo, necesito: destinatario, asunto, prop贸sito, puntos principales y tono deseado.",
                    "comunicado": "Para un comunicado oficial, necesito: destinatarios, prop贸sito, informaci贸n importante a incluir y fecha de entrega.",
                    "circular": "Para una circular, necesito: destinatarios, asunto, informaci贸n a comunicar y acciones esperadas."
                },
                suggestions: ["Redactar correo", "Comunicado oficial", "Circular informativa"]
            }
        };
        
        // Plantillas predefinidas
        const templates = {
            "sesion-clase": {
                title: "Sesi贸n de Clase",
                content: `T铆tulo de la Sesi贸n: [Nombre de la sesi贸n]
                
Objetivo de Aprendizaje: 
[Describir el objetivo principal de la sesi贸n]

Competencias:
- [Competencia 1]
- [Competencia 2]

Desarrollo de la Sesi贸n:
1. Inicio (10 min): [Actividad de inicio]
2. Desarrollo (30 min): [Actividad principal]
3. Cierre (10 min): [Actividad de cierre]

Materiales:
- [Material 1]
- [Material 2]

Evaluaci贸n:
- [Instrumento de evaluaci贸n]`
            },
            "unidad-aprendizaje": {
                title: "Unidad de Aprendizaje",
                content: `Unidad: [Nombre de la unidad]
Duraci贸n: [N煤mero de semanas]

Competencias de la Unidad:
- [Competencia 1]
- [Competencia 2]

Sesiones:
1. [Sesi贸n 1]
2. [Sesi贸n 2]
3. [Sesi贸n 3]

Producto Final:
[Descripci贸n del producto final de la unidad]

Evaluaci贸n:
- [Criterios de evaluaci贸n]`
            },
            "rubrica-evaluacion": {
                title: "R煤brica de Evaluaci贸n",
                content: `Competencia: [Nombre de la competencia]

Criterios | Excelente (4) | Bueno (3) | Regular (2) | Deficiente (1)
--------- | ------------- | --------- | ----------- | ------------
[Criterio 1] | [Descripci贸n] | [Descripci贸n] | [Descripci贸n] | [Descripci贸n]
[Criterio 2] | [Descripci贸n] | [Descripci贸n] | [Descripci贸n] | [Descripci贸n]
[Criterio 3] | [Descripci贸n] | [Descripci贸n] | [Descripci贸n] | [Descripci贸n]`
            }
        };
        
        // Inicializaci贸n
        document.addEventListener('DOMContentLoaded', function() {
            // Actualizar hora
            updateCurrentTime();
            setInterval(updateCurrentTime, 60000);
            
            // Mostrar modal de login al cargar la p谩gina
            loginModal.classList.remove('hidden');
            
            // Configurar eventos
            setupEventListeners();
        });
        
        function setupEventListeners() {
            // Login
            loginBtn.addEventListener('click', handleLogin);
            usernameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') handleLogin();
            });
            passwordInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') handleLogin();
            });
            
            // Logout
            logoutBtn.addEventListener('click', handleLogout);
            
            // Env铆o de mensajes
            sendBtn.addEventListener('click', sendMessage);
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Cambio de m贸dulos
            moduleBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    changeModule(this.dataset.module);
                });
            });
            
            // Plantillas
            templateCards.forEach(card => {
                card.addEventListener('click', function() {
                    useTemplate(this.dataset.template);
                });
            });
            
            // Limpiar chat
            clearChatBtn.addEventListener('click', clearChat);
            
            // Ayuda
            helpBtn.addEventListener('click', showHelp);
            
            // Acciones r谩pidas
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('quick-action-btn')) {
                    handleQuickAction(e.target.dataset.action);
                }
            });
        }
        
        function handleLogin() {
            const username = usernameInput.value.trim();
            const password = passwordInput.value.trim();
            
            if (username && password) {
                currentUser = username;
                userAvatar.textContent = username.charAt(0).toUpperCase();
                userNameSpan.textContent = username;
                loginModal.classList.add('hidden');
                
                // Mostrar mensaje de bienvenida
                addBotMessage(`隆Bienvenido/a, ${username}! Soy tu asistente virtual para la planificaci贸n docente. Estoy aqu铆 para ayudarte a optimizar tu tiempo en la creaci贸n de materiales educativos. 驴En qu茅 puedo ayudarte hoy?`);
                
                // Mostrar sugerencias del m贸dulo activo
                showModuleSuggestions();
            } else {
                alert('Por favor, ingresa usuario y contrase帽a');
            }
        }
        
        function handleLogout() {
            currentUser = null;
            userAvatar.textContent = 'D';
            userNameSpan.textContent = 'Docente';
            loginModal.classList.remove('hidden');
            
            // Limpiar chat
            clearChat();
        }
        
        function changeModule(moduleId) {
            // Actualizar botones activos
            moduleBtns.forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.module === moduleId) {
                    btn.classList.add('active');
                }
            });
            
            // Actualizar m贸dulo actual
            activeModule = moduleId;
            currentModule.textContent = knowledgeBase[moduleId].name;
            
            // Mostrar mensaje de bienvenida del m贸dulo
            addBotMessage(knowledgeBase[moduleId].greeting);
            
            // Mostrar sugerencias del m贸dulo
            showModuleSuggestions();
        }
        
        function sendMessage() {
            const message = userInput.value.trim();
            
            if (message && !isWaitingForResponse) {
                // Agregar mensaje del usuario
                addUserMessage(message);
                
                // Limpiar input
                userInput.value = '';
                
                // Simular procesamiento
                isWaitingForResponse = true;
                showTypingIndicator();
                
                // Simular tiempo de respuesta
                setTimeout(() => {
                    hideTypingIndicator();
                    processUserMessage(message);
                    isWaitingForResponse = false;
                }, 1500);
            }
        }
        
        function processUserMessage(message) {
            const lowerMessage = message.toLowerCase();
            let response = knowledgeBase[activeModule].default;
            
            // Buscar palabras clave en el mensaje
            for (const [key, value] of Object.entries(knowledgeBase[activeModule].responses)) {
                if (lowerMessage.includes(key) && key !== "greeting" && key !== "default") {
                    response = value;
                    break;
                }
            }
            
            // Respuestas especiales para saludos
            if (lowerMessage.includes('hola') || lowerMessage.includes('buenos d铆as') || 
                lowerMessage.includes('buenas tardes') || lowerMessage.includes('buenas noches')) {
                response = `隆Hola ${currentUser}! ${knowledgeBase[activeModule].greeting}`;
            }
            
            // Respuesta de agradecimiento
            if (lowerMessage.includes('gracias')) {
                response = `隆De nada, ${currentUser}! Estoy aqu铆 para ayudarte. 驴Necesitas algo m谩s?`;
            }
            
            // Respuesta espec铆fica para "Elaboraci贸n de Silabos"
            if (lowerMessage.includes('elaboraci贸n') && lowerMessage.includes('silabo')) {
                response = `Para la elaboraci贸n de s铆labos, necesito que me proporciones informaci贸n sobre: 
                - Nombre del curso
                - Cr茅ditos
                - Competencias a desarrollar
                - Contenidos principales
                - Metodolog铆a de ense帽anza
                - Sistema de evaluaci贸n
                
                Tambi茅n puedo ayudarte con la estructura del s铆labo, definici贸n de competencias o dise帽o del sistema de evaluaci贸n.`;
            }
            
            addBotMessage(response);
            
            // Mostrar sugerencias despu茅s de la respuesta
            showModuleSuggestions();
        }
        
        function useTemplate(templateId) {
            if (templates[templateId]) {
                const template = templates[templateId];
                addBotMessage(`Aqu铆 tienes la plantilla de "${template.title}":\n\n${template.content}\n\nPuedes personalizarla seg煤n tus necesidades.`);
            }
        }
        
        function handleQuickAction(action) {
            switch(action) {
                case 'planificar-sesion':
                    changeModule('planificacion');
                    addBotMessage("Perfecto, vamos a planificar una sesi贸n de clase. Necesito que me proporciones: nivel educativo, 谩rea o asignatura, competencias a desarrollar, duraci贸n y metodolog铆a preferida.");
                    break;
                case 'crear-silabo':
                    changeModule('silabos');
                    addBotMessage("Excelente, vamos a crear un s铆labo acad茅mico. Necesito que me proporciones: nombre del curso, cr茅ditos, competencias, contenidos, metodolog铆a y sistema de evaluaci贸n.");
                    break;
                case 'generar-material':
                    changeModule('contenidos');
                    addBotMessage("Vamos a generar material visual. Necesito que me proporciones: tema, nivel educativo, tipo de material (presentaci贸n, infograf铆a, etc.), elementos clave a incluir y estilo preferido.");
                    break;
                case 'evaluar-competencias':
                    changeModule('evaluacion');
                    addBotMessage("Vamos a crear instrumentos de evaluaci贸n. Necesito que me proporciones: competencia a evaluar, criterios de evaluaci贸n, niveles de desempe帽o y tipo de instrumento (r煤brica, lista de cotejo, etc.).");
                    break;
            }
        }
        
        function clearChat() {
            chatMessages.innerHTML = '';
            addBotMessage(`隆Hola de nuevo! 驴En qu茅 puedo ayudarte hoy?`);
            showModuleSuggestions();
        }
        
        function showHelp() {
            addBotMessage(`Puedo ayudarte con:

 <strong>Planificaci贸n Curricular</strong>: Creaci贸n de sesiones de clase, unidades de aprendizaje y secuencias did谩cticas.

 <strong>Elaboraci贸n de S铆labos</strong>: Desarrollo de s铆labos acad茅micos con estructura oficial.

 <strong>Generaci贸n de Contenidos Visuales</strong>: Creaci贸n de presentaciones, infograf铆as y materiales visuales.

 <strong>Evaluaci贸n de Competencias</strong>: Dise帽o de instrumentos de evaluaci贸n como r煤bricas y listas de cotejo.

锔 <strong>Comunicaci贸n Institucional</strong>: Asistencia en la redacci贸n de comunicados y correos institucionales.

Usa los botones de la izquierda para cambiar entre m贸dulos o las sugerencias para tareas espec铆ficas.`);
        }
        
        function showModuleSuggestions() {
            const suggestions = knowledgeBase[activeModule].suggestions;
            if (suggestions && suggestions.length > 0) {
                const suggestionsHTML = suggestions.map(suggestion => 
                    `<div class="suggestion-chip" data-suggestion="${suggestion}">${suggestion}</div>`
                ).join('');
                
                addBotMessage(`<div class="suggestion-chips">${suggestionsHTML}</div>`, true);
                
                // Agregar event listeners a los chips de sugerencia
                setTimeout(() => {
                    document.querySelectorAll('.suggestion-chip').forEach(chip => {
                        chip.addEventListener('click', function() {
                            userInput.value = this.dataset.suggestion;
                            sendMessage();
                        });
                    });
                }, 100);
            }
        }
        
        function addUserMessage(message) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', 'user-message');
            messageElement.innerHTML = `<div>${message}</div><div class="message-time">${new Date().toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' })}</div>`;
            chatMessages.appendChild(messageElement);
            scrollToBottom();
        }
        
        function addBotMessage(message, isSuggestion = false) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', 'bot-message');
            
            // Procesar saltos de l铆nea
            if (!isSuggestion) {
                messageElement.innerHTML = `<div>${message}</div><div class="message-time">${new Date().toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' })}</div>`;
            } else {
                messageElement.innerHTML = message;
            }
            
            chatMessages.appendChild(messageElement);
            scrollToBottom();
        }
        
        function showTypingIndicator() {
            const typingElement = document.createElement('div');
            typingElement.classList.add('typing-indicator');
            typingElement.id = 'typing-indicator';
            typingElement.innerHTML = `
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
                El asistente est谩 escribiendo...
            `;
            chatMessages.appendChild(typingElement);
            scrollToBottom();
        }
        
        function hideTypingIndicator() {
            const typingElement = document.getElementById('typing-indicator');
            if (typingElement) {
                typingElement.remove();
            }
        }
        
        function scrollToBottom() {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    </script>
</body>
</html>